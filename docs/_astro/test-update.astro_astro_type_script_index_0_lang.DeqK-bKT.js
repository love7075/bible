const u=document.getElementById("submit"),e=document.getElementById("result"),t=e?.querySelector("pre"),o=document.getElementById("debug"),d=o?.querySelector("pre");u?.addEventListener("click",async()=>{const i=document.getElementById("version").value,l=document.getElementById("refId").value,a=document.getElementById("content").value,r={version:i,refId:l,content:a};o&&d&&(o.classList.remove("hidden"),d.textContent=JSON.stringify({requestBody:r,headers:{"Content-Type":"application/json"}},null,2));try{const n=await(await fetch("/api/verses/update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).text();console.log("原始响应:",n);let s;try{s=JSON.parse(n)}catch{s={error:"解析响应失败",rawResponse:n}}e&&t&&(e.classList.remove("hidden"),t.textContent=JSON.stringify(s,null,2))}catch(c){e&&t&&(e.classList.remove("hidden"),t.textContent=`错误：${c}`)}});
