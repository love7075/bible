import{b as f,f as g,a as k,v as y}from"./utils.D3Cb6wSv.js";const i=document.getElementById("version1"),h=document.getElementById("version2"),n=document.getElementById("chapters"),s=document.getElementById("books"),E=f.map(e=>[e.key,e.name]);g(i,Object.entries(y));g(h,Object.entries(y));g(s,E);const I=document.getElementById("content1"),m=document.getElementById("content2"),u=new Map;async function w(e){if(u.has(e))return u.get(e);const c=await(await fetch(e)).json();return u.set(e,c),c}async function v(e,t,c,o){t.innerHTML="";try{const d=(await w(e)).find(a=>a.book===c&&a.chapter===o);if(!d||!d.verses)throw new Error(`Chapter ${o} not found for book ${c}`);for(const a of d.verses){const x=document.createElement("p");x.innerHTML=`${a.num} ${a.verse}`,t.appendChild(x)}}catch(r){console.error("Error loading chapter:",r);const d=r instanceof Error?r.message:"未知错误";t.innerHTML=`<p>加载章节内容时出错: ${d}</p>`}}function L(){const e=document.querySelectorAll("#content1 p"),t=document.querySelectorAll("#content2 p"),c=Math.min(e.length,t.length);for(let o=0;o<c;o++){e[o].style.height="",t[o].style.height="";const r=e[o].offsetHeight,d=t[o].offsetHeight,a=Math.max(r,d);e[o].style.height=a+"px",t[o].style.height=a+"px"}}async function l(){if(I&&m){const e=f.find(d=>d.key===s.value);if(!e)return;const t=e.chunk||1,c=parseInt(n.value),o=`/version/${i.value}/chunk${t}.json`,r=`/version/${h.value}/chunk${t}.json`;await v(o,I,e.key,c),await v(r,m,e.key,c),L()}}function p(){k(n,f.find(e=>e.key===s.value)?.chapters??0),n.selectedIndex=0}i.selectedIndex=0;h.selectedIndex=1;s.selectedIndex=0;p();n.selectedIndex=0;i.addEventListener("change",()=>l());h.addEventListener("change",()=>l());n.addEventListener("change",()=>l());s.addEventListener("change",()=>p());window.addEventListener("DOMContentLoaded",l);document.querySelectorAll(".nextpage").forEach(e=>{console.log("add events"),e.addEventListener("click",()=>{let t=!1;n.selectedIndex<n.options.length-1?(n.selectedIndex=n.selectedIndex+1,t=!0):s.selectedIndex<s.options.length-1&&(n.selectedIndex=0,s.selectedIndex=s.selectedIndex+1,t=!0),t&&(l(),window.scrollTo(0,0))})});document.querySelectorAll(".prepage").forEach(e=>{console.log("add events"),e.addEventListener("click",()=>{let t=!1;n.selectedIndex>0?(n.selectedIndex=n.selectedIndex-1,t=!0):s.selectedIndex>0&&(s.selectedIndex=s.selectedIndex-1,p(),n.selectedIndex=n.options.length-1,t=!0),t&&(window.scrollTo(0,0),l())})});
